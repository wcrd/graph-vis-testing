import{s as at,n as H,o as Mt,b as zt}from"../chunks/scheduler.e108d1fd.js";import{S as st,i as ot,g as M,s as C,h as z,j as B,f as E,c as I,y as U,k as V,a as lt,x as N,r as gt,u as _t,v as yt,d as vt,t as mt,w as xt}from"../chunks/index.a1e27827.js";import{s as G,d as St,t as It,i as Ht,w as Bt,a as Lt,c as wt,x as Rt,y as Gt,b as Ut}from"../chunks/transform.55df0093.js";class bt extends Map{constructor(e,n=Yt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(At(this,e))}has(e){return super.has(At(this,e))}set(e,n){return super.set(Xt(this,e),n)}delete(e){return super.delete(Ot(this,e))}}function At({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xt({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ot({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Yt(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ft(t){let e;for(;e=t.sourceEvent;)t=e;return t}function kt(t,e){if(t=Ft(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const qt={passive:!1},X={capture:!0,passive:!1};function K(t){t.stopImmediatePropagation()}function R(t){t.preventDefault(),t.stopImmediatePropagation()}function Wt(t){var e=t.document.documentElement,n=G(t).on("dragstart.drag",R,X);"onselectstart"in e?n.on("selectstart.drag",R,X):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Qt(t,e){var n=t.document.documentElement,r=G(t).on("dragstart.drag",null);e&&(r.on("click.drag",R,X),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const F=t=>()=>t;function it(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:c,y:s,dx:d,dy:l,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:g}})}it.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Kt(t){return!t.ctrlKey&&!t.button}function Jt(){return this.parentNode}function Zt(t,e){return e??{x:t.x,y:t.y}}function te(){return navigator.maxTouchPoints||"ontouchstart"in this}function ee(){var t=Kt,e=Jt,n=Zt,r=te,i={},a=St("start","drag","end"),c=0,s,d,l,g,_=0;function f(u){u.on("mousedown.drag",p).filter(r).on("touchstart.drag",h).on("touchmove.drag",y,qt).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(u,x){if(!(g||!t.call(this,u,x))){var b=w(this,e.call(this,u,x),u,x,"mouse");b&&(G(u.view).on("mousemove.drag",m,X).on("mouseup.drag",o,X),Wt(u.view),K(u),l=!1,s=u.clientX,d=u.clientY,b("start",u))}}function m(u){if(R(u),!l){var x=u.clientX-s,b=u.clientY-d;l=x*x+b*b>_}i.mouse("drag",u)}function o(u){G(u.view).on("mousemove.drag mouseup.drag",null),Qt(u.view,l),R(u),i.mouse("end",u)}function h(u,x){if(t.call(this,u,x)){var b=u.changedTouches,A=e.call(this,u,x),k=b.length,$,T;for($=0;$<k;++$)(T=w(this,A,u,x,b[$].identifier,b[$]))&&(K(u),T("start",u,b[$]))}}function y(u){var x=u.changedTouches,b=x.length,A,k;for(A=0;A<b;++A)(k=i[x[A].identifier])&&(R(u),k("drag",u,x[A]))}function v(u){var x=u.changedTouches,b=x.length,A,k;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),A=0;A<b;++A)(k=i[x[A].identifier])&&(K(u),k("end",u,x[A]))}function w(u,x,b,A,k,$){var T=a.copy(),j=kt($||b,x),ht,ft,Y;if((Y=n.call(u,new it("beforestart",{sourceEvent:b,target:f,identifier:k,active:c,x:j[0],y:j[1],dx:0,dy:0,dispatch:T}),A))!=null)return ht=Y.x-j[0]||0,ft=Y.y-j[1]||0,function Et(W,dt,Ct){var pt=j,Q;switch(W){case"start":i[k]=Et,Q=c++;break;case"end":delete i[k],--c;case"drag":j=kt(Ct||dt,x),Q=c;break}T.call(W,u,new it(W,{sourceEvent:dt,subject:Y,target:f,identifier:k,active:Q,x:j[0]+ht,y:j[1]+ft,dx:j[0]-pt[0],dy:j[1]-pt[1],dispatch:T}),A)}}return f.filter=function(u){return arguments.length?(t=typeof u=="function"?u:F(!!u),f):t},f.container=function(u){return arguments.length?(e=typeof u=="function"?u:F(u),f):e},f.subject=function(u){return arguments.length?(n=typeof u=="function"?u:F(u),f):n},f.touchable=function(u){return arguments.length?(r=typeof u=="function"?u:F(!!u),f):r},f.on=function(){var u=a.on.apply(a,arguments);return u===a?f:u},f.clickDistance=function(u){return arguments.length?(_=(u=+u)*u,f):Math.sqrt(_)},f}function ne(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Tt(this.cover(e,n),e,n,t)}function Tt(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,c={data:r},s=t._x0,d=t._y0,l=t._x1,g=t._y1,_,f,p,m,o,h,y,v;if(!a)return t._root=c,t;for(;a.length;)if((o=e>=(_=(s+l)/2))?s=_:l=_,(h=n>=(f=(d+g)/2))?d=f:g=f,i=a,!(a=a[y=h<<1|o]))return i[y]=c,t;if(p=+t._x.call(null,a.data),m=+t._y.call(null,a.data),e===p&&n===m)return c.next=a,i?i[y]=c:t._root=c,t;do i=i?i[y]=new Array(4):t._root=new Array(4),(o=e>=(_=(s+l)/2))?s=_:l=_,(h=n>=(f=(d+g)/2))?d=f:g=f;while((y=h<<1|o)===(v=(m>=f)<<1|p>=_));return i[v]=a,i[y]=c,t}function re(t){var e,n,r=t.length,i,a,c=new Array(r),s=new Array(r),d=1/0,l=1/0,g=-1/0,_=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(c[n]=i,s[n]=a,i<d&&(d=i),i>g&&(g=i),a<l&&(l=a),a>_&&(_=a));if(d>g||l>_)return this;for(this.cover(d,l).cover(g,_),n=0;n<r;++n)Tt(this,c[n],s[n],t[n]);return this}function ie(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var c=i-n||1,s=this._root,d,l;n>t||t>=i||r>e||e>=a;)switch(l=(e<r)<<1|t<n,d=new Array(4),d[l]=s,s=d,c*=2,l){case 0:i=n+c,a=r+c;break;case 1:n=i-c,a=r+c;break;case 2:i=n+c,r=a-c;break;case 3:n=i-c,r=a-c;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function ae(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function se(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function D(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function oe(t,e,n){var r,i=this._x0,a=this._y0,c,s,d,l,g=this._x1,_=this._y1,f=[],p=this._root,m,o;for(p&&f.push(new D(p,i,a,g,_)),n==null?n=1/0:(i=t-n,a=e-n,g=t+n,_=e+n,n*=n);m=f.pop();)if(!(!(p=m.node)||(c=m.x0)>g||(s=m.y0)>_||(d=m.x1)<i||(l=m.y1)<a))if(p.length){var h=(c+d)/2,y=(s+l)/2;f.push(new D(p[3],h,y,d,l),new D(p[2],c,y,h,l),new D(p[1],h,s,d,y),new D(p[0],c,s,h,y)),(o=(e>=y)<<1|t>=h)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-o],f[f.length-1-o]=m)}else{var v=t-+this._x.call(null,p.data),w=e-+this._y.call(null,p.data),u=v*v+w*w;if(u<n){var x=Math.sqrt(n=u);i=t-x,a=e-x,g=t+x,_=e+x,r=p.data}}return r}function le(t){if(isNaN(g=+this._x.call(null,t))||isNaN(_=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,c=this._x0,s=this._y0,d=this._x1,l=this._y1,g,_,f,p,m,o,h,y;if(!n)return this;if(n.length)for(;;){if((m=g>=(f=(c+d)/2))?c=f:d=f,(o=_>=(p=(s+l)/2))?s=p:l=p,e=n,!(n=n[h=o<<1|m]))return this;if(!n.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(r=e,y=h)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[h]=a:delete e[h],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=a,this)}function ce(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ue(){return this._root}function he(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function fe(t){var e=[],n,r=this._root,i,a,c,s,d;for(r&&e.push(new D(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,c=n.y0,s=n.x1,d=n.y1)&&r.length){var l=(a+s)/2,g=(c+d)/2;(i=r[3])&&e.push(new D(i,l,g,s,d)),(i=r[2])&&e.push(new D(i,a,g,l,d)),(i=r[1])&&e.push(new D(i,l,c,s,g)),(i=r[0])&&e.push(new D(i,a,c,l,g))}return this}function de(t){var e=[],n=[],r;for(this._root&&e.push(new D(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,c=r.x0,s=r.y0,d=r.x1,l=r.y1,g=(c+d)/2,_=(s+l)/2;(a=i[0])&&e.push(new D(a,c,s,g,_)),(a=i[1])&&e.push(new D(a,g,s,d,_)),(a=i[2])&&e.push(new D(a,c,_,g,l)),(a=i[3])&&e.push(new D(a,g,_,d,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function pe(t){return t[0]}function ge(t){return arguments.length?(this._x=t,this):this._x}function _e(t){return t[1]}function ye(t){return arguments.length?(this._y=t,this):this._y}function Vt(t,e,n){var r=new ct(e??pe,n??_e,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function ct(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Nt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var P=Vt.prototype=ct.prototype;P.copy=function(){var t=new ct(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Nt(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Nt(r));return t};P.add=ne;P.addAll=re;P.cover=ie;P.data=ae;P.extent=se;P.find=oe;P.remove=le;P.removeAll=ce;P.root=ue;P.size=he;P.visit=fe;P.visitAfter=de;P.x=ge;P.y=ye;function S(t){return function(){return t}}function L(t){return(t()-.5)*1e-6}function ve(t){return t.index}function $t(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function me(t){var e=ve,n=_,r,i=S(30),a,c,s,d,l,g=1;t==null&&(t=[]);function _(h){return 1/Math.min(s[h.source.index],s[h.target.index])}function f(h){for(var y=0,v=t.length;y<g;++y)for(var w=0,u,x,b,A,k,$,T;w<v;++w)u=t[w],x=u.source,b=u.target,A=b.x+b.vx-x.x-x.vx||L(l),k=b.y+b.vy-x.y-x.vy||L(l),$=Math.sqrt(A*A+k*k),$=($-a[w])/$*h*r[w],A*=$,k*=$,b.vx-=A*(T=d[w]),b.vy-=k*T,x.vx+=A*(T=1-T),x.vy+=k*T}function p(){if(c){var h,y=c.length,v=t.length,w=new Map(c.map((x,b)=>[e(x,b,c),x])),u;for(h=0,s=new Array(y);h<v;++h)u=t[h],u.index=h,typeof u.source!="object"&&(u.source=$t(w,u.source)),typeof u.target!="object"&&(u.target=$t(w,u.target)),s[u.source.index]=(s[u.source.index]||0)+1,s[u.target.index]=(s[u.target.index]||0)+1;for(h=0,d=new Array(v);h<v;++h)u=t[h],d[h]=s[u.source.index]/(s[u.source.index]+s[u.target.index]);r=new Array(v),m(),a=new Array(v),o()}}function m(){if(c)for(var h=0,y=t.length;h<y;++h)r[h]=+n(t[h],h,t)}function o(){if(c)for(var h=0,y=t.length;h<y;++h)a[h]=+i(t[h],h,t)}return f.initialize=function(h,y){c=h,l=y,p()},f.links=function(h){return arguments.length?(t=h,p(),f):t},f.id=function(h){return arguments.length?(e=h,f):e},f.iterations=function(h){return arguments.length?(g=+h,f):g},f.strength=function(h){return arguments.length?(n=typeof h=="function"?h:S(+h),m(),f):n},f.distance=function(h){return arguments.length?(i=typeof h=="function"?h:S(+h),o(),f):i},f}const xe=1664525,we=1013904223,Dt=4294967296;function be(){let t=1;return()=>(t=(xe*t+we)%Dt)/Dt}function Ae(t){return t.x}function ke(t){return t.y}var Ne=10,$e=Math.PI*(3-Math.sqrt(5));function De(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,c=.6,s=new Map,d=It(_),l=St("tick","end"),g=be();t==null&&(t=[]);function _(){f(),l.call("tick",e),n<r&&(d.stop(),l.call("end",e))}function f(o){var h,y=t.length,v;o===void 0&&(o=1);for(var w=0;w<o;++w)for(n+=(a-n)*i,s.forEach(function(u){u(n)}),h=0;h<y;++h)v=t[h],v.fx==null?v.x+=v.vx*=c:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=c:(v.y=v.fy,v.vy=0);return e}function p(){for(var o=0,h=t.length,y;o<h;++o){if(y=t[o],y.index=o,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Ne*Math.sqrt(.5+o),w=o*$e;y.x=v*Math.cos(w),y.y=v*Math.sin(w)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function m(o){return o.initialize&&o.initialize(t,g),o}return p(),e={tick:f,restart:function(){return d.restart(_),e},stop:function(){return d.stop(),e},nodes:function(o){return arguments.length?(t=o,p(),s.forEach(m),e):t},alpha:function(o){return arguments.length?(n=+o,e):n},alphaMin:function(o){return arguments.length?(r=+o,e):r},alphaDecay:function(o){return arguments.length?(i=+o,e):+i},alphaTarget:function(o){return arguments.length?(a=+o,e):a},velocityDecay:function(o){return arguments.length?(c=1-o,e):1-c},randomSource:function(o){return arguments.length?(g=o,s.forEach(m),e):g},force:function(o,h){return arguments.length>1?(h==null?s.delete(o):s.set(o,m(h)),e):s.get(o)},find:function(o,h,y){var v=0,w=t.length,u,x,b,A,k;for(y==null?y=1/0:y*=y,v=0;v<w;++v)A=t[v],u=o-A.x,x=h-A.y,b=u*u+x*x,b<y&&(k=A,y=b);return k},on:function(o,h){return arguments.length>1?(l.on(o,h),e):l.on(o)}}}function Pe(){var t,e,n,r,i=S(-30),a,c=1,s=1/0,d=.81;function l(p){var m,o=t.length,h=Vt(t,Ae,ke).visitAfter(_);for(r=p,m=0;m<o;++m)e=t[m],h.visit(f)}function g(){if(t){var p,m=t.length,o;for(a=new Array(m),p=0;p<m;++p)o=t[p],a[o.index]=+i(o,p,t)}}function _(p){var m=0,o,h,y=0,v,w,u;if(p.length){for(v=w=u=0;u<4;++u)(o=p[u])&&(h=Math.abs(o.value))&&(m+=o.value,y+=h,v+=h*o.x,w+=h*o.y);p.x=v/y,p.y=w/y}else{o=p,o.x=o.data.x,o.y=o.data.y;do m+=a[o.data.index];while(o=o.next)}p.value=m}function f(p,m,o,h){if(!p.value)return!0;var y=p.x-e.x,v=p.y-e.y,w=h-m,u=y*y+v*v;if(w*w/d<u)return u<s&&(y===0&&(y=L(n),u+=y*y),v===0&&(v=L(n),u+=v*v),u<c&&(u=Math.sqrt(c*u)),e.vx+=y*p.value*r/u,e.vy+=v*p.value*r/u),!0;if(p.length||u>=s)return;(p.data!==e||p.next)&&(y===0&&(y=L(n),u+=y*y),v===0&&(v=L(n),u+=v*v),u<c&&(u=Math.sqrt(c*u)));do p.data!==e&&(w=a[p.data.index]*r/u,e.vx+=y*w,e.vy+=v*w);while(p=p.next)}return l.initialize=function(p,m){t=p,n=m,g()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:S(+p),g(),l):i},l.distanceMin=function(p){return arguments.length?(c=p*p,l):Math.sqrt(c)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(d=p*p,l):Math.sqrt(d)},l}function Me(t){var e=S(.1),n,r,i;typeof t!="function"&&(t=S(t==null?0:+t));function a(s){for(var d=0,l=n.length,g;d<l;++d)g=n[d],g.vx+=(i[d]-g.x)*r[d]*s}function c(){if(n){var s,d=n.length;for(r=new Array(d),i=new Array(d),s=0;s<d;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,c()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:S(+s),c(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:S(+s),c(),a):t},a}function ze(t){var e=S(.1),n,r,i;typeof t!="function"&&(t=S(t==null?0:+t));function a(s){for(var d=0,l=n.length,g;d<l;++d)g=n[d],g.vy+=(i[d]-g.y)*r[d]*s}function c(){if(n){var s,d=n.length;for(r=new Array(d),i=new Array(d),s=0;s<d;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,c()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:S(+s),c(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:S(+s),c(),a):t},a}function Se(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Te(){return this.eachAfter(Se)}function Ve(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function je(t,e){for(var n=this,r=[n],i,a,c=-1;n=r.pop();)if(t.call(e,n,++c,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function Ee(t,e){for(var n=this,r=[n],i=[],a,c,s,d=-1;n=r.pop();)if(i.push(n),a=n.children)for(c=0,s=a.length;c<s;++c)r.push(a[c]);for(;n=i.pop();)t.call(e,n,++d,this);return this}function Ce(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Ie(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function He(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Be(t){for(var e=this,n=Le(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Le(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Re(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Ge(){return Array.from(this)}function Ue(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Xe(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Oe(){var t=this,e,n=[t],r,i,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function ut(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=qe)):e===void 0&&(e=Fe);for(var n=new O(t),r,i=[n],a,c,s,d;r=i.pop();)if((c=e(r.data))&&(d=(c=Array.from(c)).length))for(r.children=c,s=d-1;s>=0;--s)i.push(a=c[s]=new O(c[s])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(Qe)}function Ye(){return ut(this).eachBefore(We)}function Fe(t){return t.children}function qe(t){return Array.isArray(t)?t[1]:null}function We(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Qe(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function O(t){this.data=t,this.depth=this.height=0,this.parent=null}O.prototype=ut.prototype={constructor:O,count:Te,each:Ve,eachAfter:Ee,eachBefore:je,find:Ce,sum:Ie,sort:He,path:Be,ancestors:Re,descendants:Ge,leaves:Ue,links:Xe,copy:Ye,[Symbol.iterator]:Oe};function Ke(t,e){return t.parent===e.parent?1:2}function J(t){var e=t.children;return e?e[0]:t.t}function Z(t){var e=t.children;return e?e[e.length-1]:t.t}function Je(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Ze(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function tn(t,e,n){return t.a.parent===e.parent?t.a:n}function q(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}q.prototype=Object.create(O.prototype);function en(t){for(var e=new q(t,0),n,r=[e],i,a,c,s;n=r.pop();)if(a=n._.children)for(n.children=new Array(s=a.length),c=s-1;c>=0;--c)r.push(i=n.children[c]=new q(a[c],c)),i.parent=n;return(e.parent=new q(null,0)).children=[e],e}function nn(){var t=Ke,e=1,n=1,r=null;function i(l){var g=en(l);if(g.eachAfter(a),g.parent.m=-g.z,g.eachBefore(c),r)l.eachBefore(d);else{var _=l,f=l,p=l;l.eachBefore(function(v){v.x<_.x&&(_=v),v.x>f.x&&(f=v),v.depth>p.depth&&(p=v)});var m=_===f?1:t(_,f)/2,o=m-_.x,h=e/(f.x+m+o),y=n/(p.depth||1);l.eachBefore(function(v){v.x=(v.x+o)*h,v.y=v.depth*y})}return l}function a(l){var g=l.children,_=l.parent.children,f=l.i?_[l.i-1]:null;if(g){Ze(l);var p=(g[0].z+g[g.length-1].z)/2;f?(l.z=f.z+t(l._,f._),l.m=l.z-p):l.z=p}else f&&(l.z=f.z+t(l._,f._));l.parent.A=s(l,f,l.parent.A||_[0])}function c(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,g,_){if(g){for(var f=l,p=l,m=g,o=f.parent.children[0],h=f.m,y=p.m,v=m.m,w=o.m,u;m=Z(m),f=J(f),m&&f;)o=J(o),p=Z(p),p.a=l,u=m.z+v-f.z-h+t(m._,f._),u>0&&(Je(tn(m,l,_),l,u),h+=u,y+=u),v+=m.m,h+=f.m,w+=o.m,y+=p.m;m&&!Z(p)&&(p.t=m,p.m+=v-y),f&&!J(o)&&(o.t=f,o.m+=h-w,_=l)}return _}function d(l){l.x*=e,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(t=l,i):t},i.size=function(l){return arguments.length?(r=!1,e=+l[0],n=+l[1],i):r?null:[e,n]},i.nodeSize=function(l){return arguments.length?(r=!0,e=+l[0],n=+l[1],i):r?[e,n]:null},i}const Pt=Symbol("implicit");function jt(){var t=new bt,e=[],n=[],r=Pt;function i(a){let c=t.get(a);if(c===void 0){if(r!==Pt)return r;t.set(a,c=e.push(a)-1)}return n[c%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new bt;for(const c of a)t.has(c)||t.set(c,e.push(c)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return jt(e,n).unknown(r)},Ht.apply(i,arguments),i}function rn(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const an=rn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");class sn{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function on(t){return new sn(t,!0)}function ln(t){return t.source}function cn(t){return t.target}function un(t){let e=ln,n=cn,r=Rt,i=Gt,a=null,c=null,s=Bt(d);function d(){let l;const g=Lt.call(arguments),_=e.apply(this,g),f=n.apply(this,g);if(a==null&&(c=t(l=s())),c.lineStart(),g[0]=_,c.point(+r.apply(this,g),+i.apply(this,g)),g[0]=f,c.point(+r.apply(this,g),+i.apply(this,g)),c.lineEnd(),l)return c=null,l+""||null}return d.source=function(l){return arguments.length?(e=l,d):e},d.target=function(l){return arguments.length?(n=l,d):n},d.x=function(l){return arguments.length?(r=typeof l=="function"?l:wt(+l),d):r},d.y=function(l){return arguments.length?(i=typeof l=="function"?l:wt(+l),d):i},d.context=function(l){return arguments.length?(l==null?a=c=null:c=t(a=l),d):a},d}function hn(){return un(on)}const fn=[{source:"target",target:"floor_damper_1",type:"feeds",source_class:"AHU",target_class:"Damper"},{source:"target",target:"vav_direct",type:"feeds",source_class:"AHU",target_class:"VAV"},{source:"floor_damper_1",target:"vav_1",type:"feeds",source_class:"Damper",target_class:"VAV"},{source:"floor_damper_1",target:"vav_2",type:"feeds",source_class:"Damper",target_class:"VAV"},{source:"floor_damper_1",target:"vav_3",type:"feeds",source_class:"Damper",target_class:"VAV"},{source:"vav_1",target:"vav_1_damper",type:"hasPart",source_class:"VAV",target_class:"Discharge_Damper"},{source:"vav_2",target:"vav_2_damper",type:"hasPart",source_class:"VAV",target_class:"Discharge_Damper"},{source:"vav_3",target:"vav_3_damper",type:"hasPart",source_class:"VAV",target_class:"Discharge_Damper"},{source:"vav_direct",target:"vav_direct_damper",type:"hasPart",source_class:"VAV",target_class:"Discharge_Damper"},{source:"target",target:"pnt_1",type:"hasPoint",source_class:"AHU",target_class:"Discharge_Air_Static_Pressure_Sensor"},{source:"target",target:"pnt_2",type:"hasPoint",source_class:"AHU",target_class:"Discharge_Air_Static_Pressure_Setpoint"},{source:"vav_1_damper",target:"vav_1_pnt_1",type:"hasPoint",source_class:"Discharge_Damper",target_class:"Position_Sensor"},{source:"vav_2_damper",target:"vav_2_pnt_1",type:"hasPoint",source_class:"Discharge_Damper",target_class:"Position_Sensor"},{source:"vav_3_damper",target:"vav_3_pnt_1",type:"hasPoint",source_class:"Discharge_Damper",target_class:"Position_Sensor"},{source:"vav_direct_damper",target:"vav_direct_pnt_1",type:"hasPoint",source_class:"Discharge_Damper",target_class:"Position_Sensor"}];function dn(t){let e,n,r,i,a=`<div class="flex flex-row gap-x-2 items-center"><span class="block h-3 w-3 rounded-full bg-yellow-500"></span>
            Has Part</div> <div class="flex flex-row gap-x-2 items-center"><span class="block h-3 w-3 rounded-full bg-blue-500"></span>
            Feeds</div> <div class="flex flex-row gap-x-2 items-center"><span class="block h-3 w-3 rounded-full bg-green-500"></span>
            Has Point</div>`;return{c(){e=M("div"),n=M("div"),r=C(),i=M("div"),i.innerHTML=a,this.h()},l(c){e=z(c,"DIV",{class:!0});var s=B(e);n=z(s,"DIV",{}),B(n).forEach(E),r=I(s),i=z(s,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),U(i)!=="svelte-1extclg"&&(i.innerHTML=a),s.forEach(E),this.h()},h(){V(i,"id","legend"),V(i,"class","flex flex-row gap-x-5 mt-5"),V(e,"class","border rounded-md my-1 py-5 flex flex-col items-center")},m(c,s){lt(c,e,s),N(e,n),t[1](n),N(e,r),N(e,i)},p:H,i:H,o:H,d(c){c&&E(e),t[1](null)}}}const tt=900,et=600;function pn(t){const e=Math.hypot(t.target.x-t.source.x,t.target.y-t.source.y);return`
            M${t.source.x},${t.source.y}
            A${e},${e} 0 0,1 ${t.target.x},${t.target.y}
        `}function gn(t,e,n){let r;const i=fn,a=Array.from(new Set(i.map(_=>_.type))),c=Object.values(i.flatMap(_=>[{id:_.target,className:_.target_class},{id:_.source,className:_.source_class}]).reduce((_,f)=>({..._,[f.id]:f}),{})),s=i.map(_=>Object.create(_)),d=jt(a,an),l=_=>{function f(o,h){o.active||_.alphaTarget(.3).restart(),h.fx=h.x,h.fy=h.y}function p(o,h){h.fx=o.x,h.fy=o.y}function m(o,h){o.active||_.alphaTarget(0),h.fx=null,h.fy=null}return ee().on("start",f).on("drag",p).on("end",m)};Mt(()=>{const _=De(c).force("link",me(s).id(o=>o.id)).force("charge",Pe().strength(-400)).force("x",Me()).force("y",ze()),f=G(r).append("svg").attr("viewBox",[-tt/2,-et/2,tt,et]).attr("width",tt).attr("height",et).attr("style","max-width: 100%; height: auto; font: 12px sans-serif;");f.append("defs").selectAll("marker").data(a).join("marker").attr("id",o=>`arrow-${o}`).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("fill",d).attr("d","M0,-5L10,0L0,5");const p=f.append("g").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(s).join("path").attr("stroke",o=>d(o.type)).attr("marker-end",o=>`url(${new URL(`#arrow-${o.type}`,location)})`),m=f.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(c).join("g").call(l(_));m.append("circle").attr("stroke","white").attr("stroke-width",1.5).attr("fill",o=>o.id=="target"?"red":"black").attr("r",o=>o.id=="target"?8:4),m.append("text").attr("x",8).attr("y","0.31em").text(o=>`${o.id} (${o.className})`).clone(!0).lower().attr("fill","none").attr("stroke","white").attr("stroke-width",3),_.on("tick",()=>{p.attr("d",pn),m.attr("transform",o=>`translate(${o.x},${o.y})`)}),invalidation.then(()=>_.stop()),Object.assign(f.node(),{scales:{color:d}})});function g(_){zt[_?"unshift":"push"](()=>{r=_,n(0,r)})}return[r,g]}class _n extends st{constructor(e){super(),ot(this,e,gn,dn,at,{})}}const yn="target",vn="entity",mn=[{uri:"https://building.com#floor_damper_1",name:"floor_damper_1",type:"entity",rel:"feeds",children:[{uri:"https://building.com#vav_1",name:"vav_1",type:"entity",rel:"feeds",children:[{uri:"https://building.com#vav_1_damper",name:"vav_1_damper",type:"entity",rel:"hasPart",children:[{uri:"https://building.com#vav_1_pnt_1",name:"vav_1_pnt_1",type:"point",rel:"hasPoint",children:[]}]}]},{uri:"https://building.com#vav_2",name:"vav_2",type:"entity",rel:"feeds",children:[{uri:"https://building.com#vav_2_damper",name:"vav_2_damper",type:"entity",rel:"hasPart",children:[{uri:"https://building.com#vav_2_pnt_1",name:"vav_2_pnt_1",type:"point",rel:"hasPoint",children:[]}]}]},{uri:"https://building.com#vav_3",name:"vav_3",type:"entity",rel:"feeds",children:[{uri:"https://building.com#vav_3_damper",name:"vav_3_damper",type:"entity",rel:"hasPart",children:[{uri:"https://building.com#vav_3_pnt_1",name:"vav_3_pnt_1",type:"point",rel:"hasPoint",children:[]}]}]}]},{uri:"https://building.com#vav_direct",name:"vav_direct",type:"entity",rel:"feeds",children:[{uri:"https://building.com#vav_direct_damper",name:"vav_direct_damper",type:"entity",rel:"hasPart",children:[{uri:"https://building.com#vav_direct_pnt_1",name:"vav_direct_pnt_1",type:"point",rel:"hasPoint",children:[]}]}]},{uri:"https://building.com#pnt_1",name:"pnt_1",type:"point",rel:"hasPoint",children:[]},{uri:"https://building.com#pnt_2",name:"pnt_2",type:"point",rel:"hasPoint",children:[]}],xn={name:yn,type:vn,children:mn};function wn(t){let e,n,r,i,a=`<div class="flex flex-row gap-x-2 items-center"><span class="block h-3 w-3 rounded-full bg-yellow-500"></span>
            Has Part</div> <div class="flex flex-row gap-x-2 items-center"><span class="block h-3 w-3 rounded-full bg-blue-500"></span>
            Feeds</div> <div class="flex flex-row gap-x-2 items-center"><span class="block h-3 w-3 rounded-full bg-green-500"></span>
            Has Point</div>`;return{c(){e=M("div"),n=M("div"),r=C(),i=M("div"),i.innerHTML=a,this.h()},l(c){e=z(c,"DIV",{class:!0});var s=B(e);n=z(s,"DIV",{}),B(n).forEach(E),r=I(s),i=z(s,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),U(i)!=="svelte-1extclg"&&(i.innerHTML=a),s.forEach(E),this.h()},h(){V(i,"id","legend"),V(i,"class","flex flex-row gap-x-5 mt-5"),V(e,"class","border rounded-md my-1 py-5 flex flex-col items-center")},m(c,s){lt(c,e,s),N(e,n),t[1](n),N(e,r),N(e,i)},p:H,i:H,o:H,d(c){c&&E(e),t[1](null)}}}const nt=928,rt=10;function bn(t,e,n){let r;const a=ut(xn),c=nt/(a.height+1),s=nn().nodeSize([rt,c]);a.sort((f,p)=>Ut(f.data.type,p.data.type)),s(a);let d=1/0,l=-d;a.each(f=>{f.x>l&&(l=f.x),f.x<d&&(d=f.x)});const g=l-d+rt*2;console.debug(a),Mt(()=>{const f=G(r).append("svg").attr("width",nt).attr("height",g).attr("viewBox",[-c/3,d-rt,nt,g]).attr("style","max-width: 100%; height: auto; font: 10px sans-serif;");f.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5).selectAll().data(a.links()).join("path").attr("d",hn().x(o=>o.y).y(o=>o.x)).attr("stroke",o=>{switch(o.target.data.rel){case"hasPoint":return"green";case"hasPart":return"blue";case"feeds":return"orange";default:return"#555"}});const m=f.append("g").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll().data(a.descendants()).join("g").attr("transform",o=>`translate(${o.y},${o.x})`);m.filter(o=>o.data.type=="point").append("circle").attr("fill",o=>o.children?"#555":"#999").attr("r",o=>4),m.filter(o=>o.data.type=="entity").append("rect").attr("x",-4).attr("y",-4).attr("width",8).attr("height",8).attr("fill",o=>o.data.name=="target"?"red":"black"),m.append("text").attr("dy","0.31em").attr("x",o=>o.children?-7:6).attr("text-anchor",o=>o.children?"end":"start").text(o=>o.data.name).clone(!0).lower().attr("stroke","white")});function _(f){zt[f?"unshift":"push"](()=>{r=f,n(0,r)})}return[r,_]}class An extends st{constructor(e){super(),ot(this,e,bn,wn,at,{})}}function kn(t){let e,n,r="Gallery of Graphs",i,a,c,s,d,l="Directed Graph",g,_,f,p,m,o,h,y="Tidy Tree",v,w,u;return _=new _n({}),w=new An({}),{c(){e=M("div"),n=M("h1"),n.textContent=r,i=C(),a=M("hr"),c=C(),s=M("div"),d=M("h1"),d.textContent=l,g=C(),gt(_.$$.fragment),f=C(),p=M("hr"),m=C(),o=M("div"),h=M("h1"),h.textContent=y,v=C(),gt(w.$$.fragment),this.h()},l(x){e=z(x,"DIV",{class:!0});var b=B(e);n=z(b,"H1",{class:!0,"data-svelte-h":!0}),U(n)!=="svelte-1b0osvk"&&(n.textContent=r),i=I(b),a=z(b,"HR",{}),c=I(b),s=z(b,"DIV",{class:!0});var A=B(s);d=z(A,"H1",{class:!0,"data-svelte-h":!0}),U(d)!=="svelte-fymuoh"&&(d.textContent=l),g=I(A),_t(_.$$.fragment,A),A.forEach(E),f=I(b),p=z(b,"HR",{}),m=I(b),o=z(b,"DIV",{class:!0});var k=B(o);h=z(k,"H1",{class:!0,"data-svelte-h":!0}),U(h)!=="svelte-107stjn"&&(h.textContent=y),v=I(k),_t(w.$$.fragment,k),k.forEach(E),b.forEach(E),this.h()},h(){V(n,"class","text-2xl my-2"),V(d,"class","text-xl"),V(s,"class","my-2"),V(h,"class","text-xl"),V(o,"class","my-2"),V(e,"class","container mx-auto")},m(x,b){lt(x,e,b),N(e,n),N(e,i),N(e,a),N(e,c),N(e,s),N(s,d),N(s,g),yt(_,s,null),N(e,f),N(e,p),N(e,m),N(e,o),N(o,h),N(o,v),yt(w,o,null),u=!0},p:H,i(x){u||(vt(_.$$.fragment,x),vt(w.$$.fragment,x),u=!0)},o(x){mt(_.$$.fragment,x),mt(w.$$.fragment,x),u=!1},d(x){x&&E(e),xt(_),xt(w)}}}class Pn extends st{constructor(e){super(),ot(this,e,null,kn,at,{})}}export{Pn as component};
